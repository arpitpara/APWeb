<!DOCTYPE HTML>
<html manifest="manifest.appcache">
  <head>
    <title>ArduPilot</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/styles.css">
    <script type="text/javascript" src="/js/config.js"></script>
    <script type="text/javascript" src="/js/cors.js"></script>
    <script type="text/javascript" src="/js/mavlink.js"></script>
  </head>
<body>

<p><a href="/index.html"><img src="/images/main_logo.png" alt="ArduPilot"></a></p>

<h1>Video Streaming</h1>

<p><input type="submit" name="action" value="Refresh Camera List" onclick="refresh();"></p>

<table id="rtsp_table" class="rtsp">
  <tr><th>Camera Name</th><th class="alnright">Mount Point</th><th>Camera Type</th></tr>
</table>
<script>
    // 0 - name
    // 1 - mtpt
    // 2 - camtype
    function fill_rtsp_table(cam_data) {
        console.log(cam_data);
        var table = document.getElementById("rtsp_table");

        // delete any existing rows
        var nrows = table.rows.length;
        for (var i=nrows-1; i>0; i--) {
            table.deleteRow(i);
        }
        for (var i = 0; i < 5; i++) {
            var row = table.insertRow(table.rows.length);

            var cell0 = row.insertCell(0);
            var cell1 = row.insertCell(1);
            var cell2 = row.insertCell(2);

            cell0.innerHTML = "camname" + i;
            cell1.innerHTML = "mount" + i;
            cell2.innerHTML = "h264" + i;
        }
    }
    function refresh() {
        // command_send()
        // var x = "dasda";
        // fill_rtsp_table(x);
        console.log("test debug");
        command_send("get_camera_details()", { "onload" : fill_rtsp_table });
    }
</script>
</html>